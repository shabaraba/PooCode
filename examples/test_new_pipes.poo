// test_new_pipes.poo - æ–°ã—ã„ãƒ‘ã‚¤ãƒ—æ¼”ç®—å­ã®ãƒ†ã‚¹ãƒˆ

// é…åˆ—ã‚’ä½œæˆ
[1, 2, 3, 4, 5, 6, 7, 8, 9, 10] >> numbers
"é…åˆ—ã‚’ä½œæˆã—ã¾ã—ãŸ: " + numbers |> print

// æ¡ä»¶é–¢æ•°ã‚’å®šç¾©
def is_even() : int -> bool {
    ðŸ• % 2 == 0 >> ðŸ’©
}

// æ–°ã—ã„mapæ¼”ç®—å­(+>)ã‚’ãƒ‘ã‚¤ãƒ—ã¨ã—ã¦ä½¿ç”¨
numbers +> is_even >> results
"mapæ¼”ç®—å­(+>)ã®ãƒ†ã‚¹ãƒˆ: " + results |> print

// å¶æ•°ã®ã¿ã‚’ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚° - æ–°ã—ã„filteræ¼”ç®—å­(?>)
numbers ?> is_even >> evens
"filteræ¼”ç®—å­(?>)ã®ãƒ†ã‚¹ãƒˆ: " + evens |> print

// å¼•æ•°ä»˜ãé–¢æ•°ã‚’å®šç¾©
def multiply(factor) : int -> int {
    ðŸ• * factor >> ðŸ’©
}

// å¼•æ•°ä»˜ãã§mapæ¼”ç®—å­ã‚’ä½¿ç”¨
numbers +> multiply(10) >> multiplied
"å¼•æ•°ä»˜ãmapæ¼”ç®—å­ã®ãƒ†ã‚¹ãƒˆ: " + multiplied |> print

// å¼•æ•°ä»˜ãfilteré–¢æ•°ã‚’å®šç¾©
def greater_than(n) : int -> bool {
    ðŸ• > n >> ðŸ’©
}

// å¼•æ•°ä»˜ãã§filteræ¼”ç®—å­ã‚’ä½¿ç”¨
numbers ?> greater_than(5) >> greater_than_five
"å¼•æ•°ä»˜ãfilteræ¼”ç®—å­ã®ãƒ†ã‚¹ãƒˆ: " + greater_than_five |> print

// ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®é€£éŽ–ã¨map/filterã®çµ„ã¿åˆã‚ã› - æ–°ã—ã„æ¼”ç®—å­ã‚’ä½¿ç”¨
numbers ?> is_even +> multiply(100) >> complex_result
"è¤‡é›‘ãªãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³(æ–°æ¼”ç®—å­): " + complex_result |> print

// å¾“æ¥ã®map/filteré–¢æ•°ã¨ã®æ¯”è¼ƒ
numbers filter is_even map multiply(100) >> old_style_result
"å¾“æ¥ã®ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³(é–¢æ•°): " + old_style_result |> print

// å¾“æ¥ã®ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã¨ã®çµ„ã¿åˆã‚ã›
numbers |> filter is_even |> map multiply(100) >> pipe_result
"å¾“æ¥ã®ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³(|>): " + pipe_result |> print

// æ¼”ç®—å­ã®æ··åˆä½¿ç”¨
numbers ?> is_even |> map multiply(100) >> mixed_result1
"æ··åˆãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³1: " + mixed_result1 |> print

numbers filter is_even +> multiply(100) >> mixed_result2
"æ··åˆãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³2: " + mixed_result2 |> print
