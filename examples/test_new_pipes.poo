// test_new_pipes.poo - æ–°ã—ã„ãƒ‘ã‚¤ãƒ—æ¼”ç®—å­(+>ã¨?>)ã®ãƒ†ã‚¹ãƒˆ

// é…åˆ—ã‚’ä½œæˆ
[1, 2, 3, 4, 5, 6, 7, 8, 9, 10] >> numbers
"é…åˆ—ã‚’ä½œæˆã—ã¾ã—ãŸ: " + numbers |> print

// æ¡ä»¶é–¢æ•°ã‚’å®šç¾©
def is_even() : int -> bool {
    ðŸ• % 2 == 0 >> ðŸ’©
}

// +> æ¼”ç®—å­ï¼ˆmapï¼‰ã‚’ãƒ‘ã‚¤ãƒ—ã¨ã—ã¦ä½¿ç”¨
numbers +> is_even >> results
"+> æ¼”ç®—å­ã®ãƒ†ã‚¹ãƒˆ: " + results |> print

// ?> æ¼”ç®—å­ï¼ˆfilterï¼‰ã‚’ä½¿ã£ã¦å¶æ•°ã®ã¿ã‚’ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
numbers ?> is_even >> evens
"?> æ¼”ç®—å­ã®ãƒ†ã‚¹ãƒˆ: " + evens |> print

// å¼•æ•°ä»˜ãé–¢æ•°ã‚’å®šç¾©
def multiply(factor) : int -> int {
    ðŸ• * factor >> ðŸ’©
}

// å¼•æ•°ä»˜ãã§mapæ¼”ç®—å­ã‚’ä½¿ç”¨
numbers +> multiply(10) >> multiplied
"å¼•æ•°ä»˜ã +> æ¼”ç®—å­ã®ãƒ†ã‚¹ãƒˆ: " + multiplied |> print

// å¼•æ•°ä»˜ãfilteré–¢æ•°ã‚’å®šç¾©
def greater_than(n) : int -> bool {
    ðŸ• > n >> ðŸ’©
}

// å¼•æ•°ä»˜ãã§filteræ¼”ç®—å­ã‚’ä½¿ç”¨
numbers ?> greater_than(5) >> greater_than_five
"å¼•æ•°ä»˜ã ?> æ¼”ç®—å­ã®ãƒ†ã‚¹ãƒˆ: " + greater_than_five |> print

// ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®é€£éŽ–ã¨map/filterã®çµ„ã¿åˆã‚ã›
numbers ?> is_even +> multiply(100) >> complex_result
"è¤‡é›‘ãªãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³(?>ã¨+>ã®é€£éŽ–): " + complex_result |> print

// æ¯”è¼ƒã®ãŸã‚ã«å¾“æ¥ã®ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚¹ã‚¿ã‚¤ãƒ«
numbers |> filter is_even |> map multiply(100) >> old_style_result
"å¾“æ¥ã®ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³(|>): " + old_style_result |> print

"æ–°ã—ã„ãƒ‘ã‚¤ãƒ—æ¼”ç®—å­ãƒ†ã‚¹ãƒˆå®Œäº†" |> print
